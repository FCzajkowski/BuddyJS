const http=require('http'),fs=require('fs'),path=require('path'),root=__dirname,mime={'.html':'text/html','.js':'application/javascript','.css':'text/css','.json':'application/json','.png':'image/png','.jpg':'image/jpeg','.svg':'image/svg+xml','.ico':'image/x-icon','.scss':'text/x-scss'},securityHeaders={"Content-Security-Policy":"default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'","X-Content-Type-Options":'nosniff',"X-Frame-Options":'DENY',"Referrer-Policy":'no-referrer',"Permissions-Policy":'geolocation=()'};const serveFile=(f,r)=>{fs.readFile(f,(e,d)=>{if(e){r.writeHead(404,securityHeaders);r.end('404 Not Found');}else{const x=path.extname(f);r.writeHead(200,{...securityHeaders,'Content-Type':mime[x]||'text/plain'});r.end(d);}})};const server=http.createServer((q,r)=>{let p=q.url.split('?')[0];if(p==='/')p='/index.html';let f=path.join(root,p);if(!fs.existsSync(f))f=path.join(root,'index.html');serveFile(f,r);});const PORT=process.env.PORT||8080;server.listen(PORT,()=>{console.log('##############################################');console.log('BuddyJS server running at http://localhost:'+PORT);console.log('##############################################')});
